commands:
  clone-repo:
    parameters:
      repo_url:
        type: string
      repo_name:
        type: string
      target_branch:
        type: string
    steps:
      - run:
          name: Clone Repository
          command: cd ./packages/bot &&  ./scripts/clone.ts --repo-url << parameters.repo_url >> --repo-name << parameters.repo_name >> --branch << parameters.target_branch >> --dir ../..
  lint-repo:
    parameters:
      repo_name:
        type: string
      prettier_src:
        type: string
      prettier_config:
        type: string
      project_path:
        type: string
      tslint_config:
        type: string
    steps:
      - run:
          name: Lint Repository
          command: cd ./packages/bot && ./scripts/lint.ts --repo-name << parameters.repo_name >> --prettier-src << parameters.prettier_src >> --prettier-config << parameters.prettier_config >> --project-path << parameters.project_path >> --tslint-config << parameters.tslint_config >> --dir ../..
          no_output_timeout: 20m
  tslint-reports:
    parameters:
      repo_name:
        type: string
    steps:
      - run:
          name: Report Tslint Reslut
          command: cd ./packages/bot && ./scripts/tslint.ts reports --repo-name << parameters.repo_name >> --dir ../..
      - store_artifacts:
          path: ./sub/.results
      - persist_to_workspace:
          root: ./sub/.results
          paths:
            - << parameters.repo_name >>-result.json
  tslint-summary:
    steps:
      - run:
          name: Report Tslint Reslut
          command: cd ./packages/bot && ./scripts/tslint.ts summary --dir ../..
      - store_artifacts:
          path: ./sub/.results/result.json

